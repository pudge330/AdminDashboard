define(["jquery"],function(i){var n={modules:{},load:function(){var e=this;for(var t in e.modules)e.loadModule(t);this.__loaded=!0;for(var n=0;n<e.__onloadCallbacks.length;n++)e.__onloadCallbacks[n]()},loadModule:function(e){var t=this;t.modules.hasOwnProperty(e)&&t.modules[e].initWidgets&&t.modules[e].initWidgets()},__loaded:!1,__onloadCallbacks:[],onLoad:function(e){this.__loaded?e():this.__onloadCallbacks.push(e)}};return n.modules.Base=bglib.EventModule.extend({$el:void 0,constructor:function(){if(arguments[0]){var e=arguments[0]||{};bglib.DT.isObject(e)||(e={el:e}),this.$el=e.el,bglib.EventModule.apply(this,[e])}},initialized:function(){return this.$el instanceof i?"loaded"==this.$el.attr("data-state"):"loaded"==this.$el.getAttribute("data-state")},setState:function(e){this.$el instanceof i?this.$el.attr("data-state",e):this.$el.setAttribute("data-state",e)},getState:function(e){return this.$el instanceof i?this.$el.attr("data-state"):this.$el.getAttribute("data-state")}},{load:function(){}}),n.modules.Navigation=n.modules.Base.extend({init:function(e){if(this.$el&&!this.initialized()){var t=this;(this.$el.SkeletonWidget_Navigation=this).$el=i(this.$el),this.setState("loaded"),this.$el.find("> .navLinks > .navLink > .navLinkAction").on("click",function(e){t.handleLink(i(this).closest(".navLink"),e)}),this.$el.find(".navLinkAction .subMenuToggle").on("click",function(e){return t.toggleSubMenu(i(this).closest(".navLinkSubAction")),e.preventDefault(),!1}),this.$el.find(".navLinkAction").on("keydown",function(e){13==e.keyCode&&t.handleLink(i(this).closest(".navLink"),e)}),this.$el.find(".navLinkAction .subMenuToggle").on("keydown",function(e){if(13==e.keyCode)return t.toggleSubMenu(i(this).closest(".navLinkSubAction")),e.preventDefault(),!1}),this.$el.find(".navLinkAction .subMenuToggle").on("focusin",function(){i(this).closest(".navLinkAction").addClass("focus")}),this.$el.find(".navLinkAction .subMenuToggle").on("focusout",function(){i(this).closest(".navLinkAction").removeClass("focus")})}},toggleSubMenu:function(e){var t=e.find(".navLinkAction");"closed"==e.attr("data-sub-state")?e.find("> .navLinkSpecial").slideDown({duration:400,start:function(){"inline-block"==e.find("> .navLinkSpecial").css("display")&&e.find("> .navLinkSpecial").css("display","block"),e.attr("data-sub-state","opened")},complete:function(){"inline-block"==e.find("> .navLinkSpecial").css("display")&&e.find("> .navLinkSpecial").css("display","block"),e.attr("data-sub-state","opened")}}):e.find("> .navLinkSpecial").slideUp({duration:400,start:function(){e.attr("data-sub-state","closed")},complete:function(){e.attr("data-sub-state","closed")}}),t.blur(),t.find("> .subMenuToggle").blur()},handleLink:function(e,t){var n=e.find("> .navLinkAction");n.attr("data-href")?(i(window).width()<600&&i(".pageSkeleton").data("SkeletonWidget_Skeleton").closePageMenu(),t.ctrlKey||t.metaKey||"_blank"==n.attr("data-target")?(window.open(n.attr("data-href"),"_blank"),t.preventDefault()):location=n.attr("data-href")):e.hasClass("navLinkSubAction")&&this.toggleSubMenu(e)}},{widgetSelector:".navMenu-pageNav",initWidgets:function(){for(var e=document.querySelectorAll(n.modules.Navigation.widgetSelector),t=0;t<e.length;t++)n.modules.Navigation.initWidget(e[t])},initWidget:function(e){return new n.modules.Navigation({el:e})}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),n.modules.Skeleton=n.modules.Base.extend({events:void 0,nvpWidth:608,$pageMenuAction:void 0,$memberMenuAction:void 0,$appMenuAction:void 0,$sideMenuAction:void 0,$pageMenuWrap:void 0,$memberMenuWrap:void 0,$appMenuWrap:void 0,$sideMenuWrap:void 0,$pageContentWrap:void 0,init:function(e){var n=this;this.$el&&!this.initialized()&&((this.$el.SkeletonWidget_Skeleton=this).setState("loaded"),this.events={pageMenuClick:[],pageMenuOpen:[],pageMenuClose:[],pageMenuToggle:[],memberMenuClick:[],memberMenuOpen:[],memberMenuClose:[],memberMenuToggle:[],appMenuClick:[],appMenuOpen:[],appMenuClose:[],appMenuToggle:[],sideMenuClick:[],sideMenuOpen:[],sideMenuClose:[],sideMenuToggle:[]},this.$pageMenuAction=this.$el.querySelector(".page-header .header-nav-action"),this.$memberMenuAction=this.$el.querySelector(".page-header .header-member-toggle"),this.$appMenuAction=this.$el.querySelector(".page-header .header-app-menu-action"),this.$sideMenuAction=this.$el.querySelector(".page-header .header-side-menu-action"),this.$pageMenuWrap=this.$el.querySelector(".page-menu"),this.$memberMenuWrap=this.$el.querySelector(".page-header-menu"),this.$appMenuWrap=this.$el.querySelector(".page-app-menu"),this.$sideMenuWrap=this.$el.querySelector(".page-side-menu"),this.$pageContentWrap=this.$el.querySelector(".page-content-wrap"),this.$pageMenuAction.addEventListener("click",function(){n.trigger("pageMenuClick"),n.handlePageMenuClick()}),this.$memberMenuAction.addEventListener("click",function(){n.trigger("memberMenuClick"),n.handleMemberMenuClick()}),this.$memberMenuAction.addEventListener("keydown",function(e){9===e.keyCode&&0==e.shiftKey&&"opened"==n.$el.getAttribute("data-member-menu-state")&&setTimeout(function(){n.$memberMenuWrap.querySelector(".navLink.nl-2 .navLinkAction").focus()},1)}),this.$memberMenuWrap.querySelector(".navLink.nl-2 .navLinkAction").addEventListener("keydown",function(e){9===e.keyCode&&!0===e.shiftKey&&setTimeout(function(){n.$memberMenuAction.focus()},1)}),this.$sideMenuAction.addEventListener("click",function(){n.trigger("sideMenuClick"),n.handleSideMenuClick()}),this.$appMenuAction.addEventListener("click",function(){n.trigger("appMenuClick"),n.handleAppMenuClick()}),this.$el.querySelector(".menu-toggle.main-menu-toggle").addEventListener("click",function(){n.handlePageMenuClick()}),this.$el.querySelector(".menu-toggle.side-menu-toggle").addEventListener("click",function(){n.handleSideMenuClick()}),window.addEventListener("resize",function(e){window.innerWidth<n.nvpWidth&&"opened"==n.$el.getAttribute("data-menu-state")&&"opened"==n.$el.getAttribute("data-side-menu-state")&&n.closeSideMenu(),n.adjustBrandingMaxWidth()}),n.adjustBrandingMaxWidth(),window.addEventListener("click",function(e){var t=e.target;"opened"==n.$el.getAttribute("data-member-menu-state")&&(t.closest(".page-header-menu")||t.closest(".header-member-toggle")||n.closeMemberMenu()),"opened"==n.$el.getAttribute("data-app-menu-state")&&(t.closest(".page-app-menu")||t.closest(".header-app-menu-action")||n.closeAppMenu())}))},adjustBrandingMaxWidth:function(){for(var e=0,t=[".header-nav-action",".header-app-menu-toggle",".header-member-menu",".header-side-menu-toggle",".app-menu-spacer",".header-menu-spacer"],n=0;n<t.length;n++){var i=document.querySelector(t[n]);i&&(e+=i.offsetWidth,e+=parseInt(getComputedStyle(i)["margin-right"],10))}this.$el.querySelector(".page-header .header-branding h2").style["max-width"]="calc(100vw - "+e+"px)"},handlePageMenuClick:function(){var e=this;"closed"==e.$el.getAttribute("data-menu-state")?("opened"==e.$el.getAttribute("data-side-menu-state")&&window.innerWidth<e.nvpWidth&&e.closeSideMenu(),e.openPageMenu()):e.closePageMenu()},handleMemberMenuClick:function(){var e=this;"closed"==e.$el.getAttribute("data-member-menu-state")?e.openMemberMenu():e.closeMemberMenu()},handleAppMenuClick:function(){var e=this;"closed"==e.$el.getAttribute("data-app-menu-state")?e.openAppMenu():e.closeAppMenu()},handleSideMenuClick:function(){var e=this;"closed"==e.$el.getAttribute("data-side-menu-state")?("opened"==e.$el.getAttribute("data-menu-state")&&window.innerWidth<e.nvpWidth&&e.closePageMenu(),e.openSideMenu()):e.closeSideMenu()},openPageMenu:function(){var e=this;e.$el.setAttribute("data-menu-state","opened"),e.$pageMenuAction.querySelector(".nav-label").innerHTML="Close Page Navigation",e.$pageMenuWrap.querySelector(".inner-wrap").scrollTop=0,e.trigger("pageMenuOpen"),e.trigger("pageMenuToggle",{type:"open"})},closePageMenu:function(){var e=this;e.$el.setAttribute("data-menu-state","closed"),e.$pageMenuAction.querySelector(".nav-label").innerHTML="Open Page Navigation",e.trigger("pageMenuCLose"),e.trigger("pageMenuToggle",{type:"close"})},openMemberMenu:function(){var e=this;e.$el.setAttribute("data-member-menu-state","opened"),e.$memberMenuAction.querySelector(".member-menu-sro").innerHTML="Close Member Menu",e.$memberMenuWrap.querySelector(".inner-wrap").scrollTop=0,e.$memberMenuWrap.querySelector(".inner-wrap").focus(),e.trigger("memberMenuOpen"),e.trigger("memberMenuToggle",{type:"open"})},closeMemberMenu:function(){var e=this;e.$el.setAttribute("data-member-menu-state","closed"),e.$memberMenuAction.querySelector(".member-menu-sro").innerHTML="Open Member Menu",e.trigger("memberMenuClose"),e.trigger("memberMenuToggle",{type:"close"})},openAppMenu:function(){var e=this;e.$el.setAttribute("data-app-menu-state","opened"),e.$appMenuAction.querySelector(".nav-label").innerHTML="Close App Menu",e.$appMenuWrap.querySelector(".inner-wrap").scrollTop=0,e.trigger("appMenuOpen"),e.trigger("appMenuToggle",{type:"open"})},closeAppMenu:function(){var e=this;e.$el.setAttribute("data-app-menu-state","closed"),e.$appMenuAction.querySelector(".nav-label").innerHTML="Open App Menu",e.trigger("appMenuClose"),e.trigger("appMenuToggle",{type:"close"})},openSideMenu:function(){var e=this;e.$el.setAttribute("data-side-menu-state","opened"),e.$sideMenuAction.querySelector(".nav-label").innerHTML="Close Side Menu",e.$sideMenuAction.querySelector(".nav-icon svg g").setAttribute("transform","rotate(180, 18, 32)"),e.$sideMenuWrap.querySelector(".inner-wrap").scrollTop=0,e.trigger("sideMenuOpen"),e.trigger("sideMenuToggle",{type:"open"})},closeSideMenu:function(){var e=this;e.$el.setAttribute("data-side-menu-state","closed"),e.$sideMenuAction.querySelector(".nav-label").innerHTML="Open Side Menu",e.$sideMenuAction.querySelector(".nav-icon svg g").setAttribute("transform",""),e.trigger("sideMenuClose"),e.trigger("sideMenuToggle",{type:"close"})}},{widgetSelector:".page-skeleton",initWidgets:function(){for(var e=document.querySelectorAll(n.modules.Skeleton.widgetSelector),t=0;t<e.length;t++)n.modules.Skeleton.initWidget(e[t])},initWidget:function(e){return new n.modules.Skeleton({el:e})}}),n});