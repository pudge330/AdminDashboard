define(["jquery"],function(a){var n={modules:{},load:function(){var e=this;for(var n in e.modules)e.loadModule(n);this.__loaded=!0;for(var t=0;t<e.__onloadCallbacks.length;t++)e.__onloadCallbacks[t]()},loadModule:function(e){var n=this;n.modules.hasOwnProperty(e)&&n.modules[e].initWidgets&&n.modules[e].initWidgets()},__loaded:!1,__onloadCallbacks:[],onLoad:function(e){this.__loaded?e():this.__onloadCallbacks.push(e)}};return n.modules.Base=bglib.EventModule.extend({$el:void 0,constructor:function(){if(arguments[0]){var e=arguments[0]||{};bglib.DT.isObject(e)||(e={el:e});var n=bglib.El.element(e.el);n=a(n),e.el=n,this.$el=n,bglib.EventModule.apply(this,[e])}},initialized:function(){return"loaded"==this.$el.attr("data-state")},setState:function(e){this.$el.attr("data-state",e)},getState:function(e){return this.$el.attr("data-state")}},{load:function(){}}),n.modules.Navigation=n.modules.Base.extend({init:function(e){if(this.$el&&!this.initialized()){var n=this;this.$el.data("SkeletonWidget_Navigation",this),this.setState("loaded"),this.$el.find("> .navLinks > .navLink > .navLinkAction").on("click",function(e){n.handleLink(a(this).closest(".navLink"),e)}),this.$el.find(".navLinkAction .subMenuToggle").on("click",function(e){return n.toggleSubMenu(a(this).closest(".navLinkSubAction")),e.preventDefault(),!1}),this.$el.find(".navLinkAction").on("keydown",function(e){13==e.keyCode&&n.handleLink(a(this).closest(".navLink"),e)}),this.$el.find(".navLinkAction .subMenuToggle").on("keydown",function(e){if(13==e.keyCode)return n.toggleSubMenu(a(this).closest(".navLinkSubAction")),e.preventDefault(),!1}),this.$el.find(".navLinkAction .subMenuToggle").on("focusin",function(){a(this).closest(".navLinkAction").addClass("focus")}),this.$el.find(".navLinkAction .subMenuToggle").on("focusout",function(){a(this).closest(".navLinkAction").removeClass("focus")})}},toggleSubMenu:function(e){var n=e.find(".navLinkAction");"closed"==e.attr("data-sub-state")?e.find("> .navLinkSpecial").slideDown({duration:400,start:function(){"inline-block"==e.find("> .navLinkSpecial").css("display")&&e.find("> .navLinkSpecial").css("display","block"),e.attr("data-sub-state","opened")},complete:function(){"inline-block"==e.find("> .navLinkSpecial").css("display")&&e.find("> .navLinkSpecial").css("display","block"),e.attr("data-sub-state","opened")}}):e.find("> .navLinkSpecial").slideUp({duration:400,start:function(){e.attr("data-sub-state","closed")},complete:function(){e.attr("data-sub-state","closed")}}),n.blur(),n.find("> .subMenuToggle").blur()},handleLink:function(e,n){var t=e.find("> .navLinkAction");t.attr("data-href")?(a(window).width()<600&&a(".pageSkeleton").data("SkeletonWidget_Skeleton").closePageMenu(),n.ctrlKey||n.metaKey||"_blank"==t.attr("data-target")?(window.open(t.attr("data-href"),"_blank"),n.preventDefault()):location=t.attr("data-href")):e.hasClass("navLinkSubAction")&&this.toggleSubMenu(e)}},{widgetSelector:".navMenu-pageNav",initWidgets:function(){a(n.modules.Navigation.widgetSelector).each(function(){n.modules.Navigation.initWidget(a(this))})},initWidget:function(e){return new n.modules.Navigation({el:e})}}),n.modules.Skeleton=n.modules.Base.extend({cookieKey:"adminpanel_menu_state",events:void 0,nvpWidth:640,$pageMenuAction:void 0,$memberMenuAction:void 0,$appMenuAction:void 0,$sideMenuAction:void 0,$pageMenuWrap:void 0,$memberMenuWrap:void 0,$appMenuWrap:void 0,$sideMenuWrap:void 0,$pageContentWrap:void 0,$html:void 0,$window:void 0,init:function(e){var t=this;this.$el&&!this.initialized()&&(this.$html=a("html"),this.$window=a(window),this.$el.data("SkeletonWidget_Skeleton",this),this.setState("loaded"),this.events={pageMenuClick:[],pageMenuOpen:[],pageMenuClose:[],pageMenuToggle:[],memberMenuClick:[],memberMenuOpen:[],memberMenuClose:[],memberMenuToggle:[],appMenuClick:[],appMenuOpen:[],appMenuClose:[],appMenuToggle:[],sideMenuClick:[],sideMenuOpen:[],sideMenuClose:[],sideMenuToggle:[]},this.$pageMenuAction=this.$el.find(".page-header .header-nav-action"),this.$memberMenuAction=this.$el.find(".page-header .header-member-toggle"),this.$appMenuAction=this.$el.find(".page-header .header-app-menu-action"),this.$sideMenuAction=this.$el.find(".page-header .header-side-menu-action"),this.$pageMenuWrap=this.$el.find(".page-menu"),this.$memberMenuWrap=this.$el.find(".page-header-menu"),this.$appMenuWrap=this.$el.find(".page-app-menu"),this.$sideMenuWrap=this.$el.find(".page-side-menu"),this.$pageContentWrap=this.$el.find(".page-content-wrap"),this.$pageMenuAction.on("click",function(){t.trigger("pageMenuClick"),t.handlePageMenuClick()}),this.$memberMenuAction.on("click",function(){t.trigger("memberMenuClick"),t.handleMemberMenuClick()}),this.$memberMenuAction.on("keydown",function(e){9===e.which&&0==e.shiftKey&&"opened"==t.$el.attr("data-member-menu-state")&&setTimeout(function(){t.$memberMenuWrap.find(".navLink.nl-2 .navLinkAction").focus()},1)}),this.$memberMenuWrap.find(".navLink.nl-2 .navLinkAction").on("keydown",function(e){9===e.which&&!0===e.shiftKey&&setTimeout(function(){t.$memberMenuAction[0].focus()},1)}),this.$sideMenuAction.on("click",function(){t.trigger("sideMenuClick"),t.handleSideMenuClick()}),this.$appMenuAction.on("click",function(){t.trigger("appMenuClick"),t.handleAppMenuClick()}),this.$el.find(".menu-toggle.main-menu-toggle").on("click",function(){t.handlePageMenuClick()}),this.$el.find(".menu-toggle.side-menu-toggle").on("click",function(){t.handleSideMenuClick()}),t.$window.on("resize",function(){a(t.$window).width()<t.nvpWidth&&"opened"==t.$html.attr("data-menu-state")&&"opened"==t.$html.attr("data-side-menu-state")&&(t.$html.attr("data-side-menu-state","closed"),t.$sideMenuAction.find(".nav-label").html("Open Side Menu"),t.trigger("sideMenuClose"),t.trigger("sideMenuToggle",{type:"close"})),t.adjustBrandingMaxWidth()}),t.adjustBrandingMaxWidth(),a(t.$window).on("click",function(e){var n=a(e.target);"opened"==t.$el.attr("data-member-menu-state")&&(n.closest(".page-header-menu").length||n.closest(".header-member-toggle").length||t.closeMemberMenu()),"opened"==t.$el.attr("data-app-menu-state")&&(n.closest(".page-app-menu").length||n.closest(".header-app-menu-action").length||t.closeAppMenu())}))},adjustBrandingMaxWidth:function(){for(var e=0,n=[".header-nav-action",".header-app-menu-toggle",".header-member-menu",".header-side-menu-toggle",".app-menu-spacer",".header-menu-spacer"],t=0;t<n.length;t++){var i=a(n[t]);i.length&&(e+=i.width(),e+=parseInt(i.css("margin-right"),10))}this.$el.find(".page-header .header-branding h2").css("max-width","calc(100vw - "+e+"px)")},handlePageMenuClick:function(){var e=this;"closed"==e.$html.attr("data-menu-state")?("opened"==e.$html.attr("data-side-menu-state")&&a(e.$window).width()<e.nvpWidth&&e.closeSideMenu(),e.openPageMenu()):e.closePageMenu()},handleMemberMenuClick:function(){var e=this;"closed"==e.$el.attr("data-member-menu-state")?e.openMemberMenu():e.closeMemberMenu()},handleAppMenuClick:function(){var e=this;"closed"==e.$el.attr("data-app-menu-state")?e.openAppMenu():e.closeAppMenu()},handleSideMenuClick:function(){var e=this;"closed"==e.$html.attr("data-side-menu-state")?("opened"==e.$html.attr("data-menu-state")&&a(e.$window).width()<e.nvpWidth&&e.closePageMenu(),e.openSideMenu()):e.closeSideMenu()},openPageMenu:function(){var e=this;e.$html.attr("data-menu-state","opened"),e.$pageMenuAction.find(".nav-label").html("Close Page Navigation"),e.$pageMenuWrap.find(".inner-wrap").scrollTop(0),e.trigger("pageMenuOpen"),e.trigger("pageMenuToggle",{type:"open"})},closePageMenu:function(){var e=this;e.$html.attr("data-menu-state","closed"),e.$pageMenuAction.find(".nav-label").html("Open Page Navigation"),e.trigger("pageMenuCLose"),e.trigger("pageMenuToggle",{type:"close"})},openMemberMenu:function(){var e=this;e.$el.attr("data-member-menu-state","opened"),e.$memberMenuAction.find(".member-menu-sro").html("Close Member Menu"),e.$memberMenuWrap.find(".inner-wrap").scrollTop(0),e.$memberMenuWrap.find(".inner-wrap").focus(),e.trigger("memberMenuOpen"),e.trigger("memberMenuToggle",{type:"open"})},closeMemberMenu:function(){var e=this;e.$el.attr("data-member-menu-state","closed"),e.$memberMenuAction.find(".member-menu-sro").html("Open Member Menu"),e.trigger("memberMenuClose"),e.trigger("memberMenuToggle",{type:"close"})},openAppMenu:function(){var e=this;e.$el.attr("data-app-menu-state","opened"),e.$appMenuAction.find(".nav-label").html("Close App Menu"),e.$appMenuWrap.find(".inner-wrap").scrollTop(0),e.trigger("appMenuOpen"),e.trigger("appMenuToggle",{type:"open"})},closeAppMenu:function(){var e=this;e.$el.attr("data-app-menu-state","closed"),e.$appMenuAction.find(".nav-label").html("Open App Menu"),e.trigger("appMenuClose"),e.trigger("appMenuToggle",{type:"close"})},openSideMenu:function(){var e=this;e.$html.attr("data-side-menu-state","opened"),e.$sideMenuAction.find(".nav-label").html("Close Side Menu"),e.$sideMenuAction.find(".nav-icon svg g").attr("transform","rotate(180, 18, 32)"),e.$sideMenuWrap.find(".inner-wrap").scrollTop(0),e.trigger("sideMenuOpen"),e.trigger("sideMenuToggle",{type:"open"})},closeSideMenu:function(){var e=this;e.$html.attr("data-side-menu-state","closed"),e.$sideMenuAction.find(".nav-label").html("Open Side Menu"),e.$sideMenuAction.find(".nav-icon svg g").attr("transform",""),e.trigger("sideMenuClose"),e.trigger("sideMenuToggle",{type:"close"})},updatePageMenuCookie:function(e){e=e||this.$html.attr("data-menu-state")}},{widgetSelector:".page-skeleton",initWidgets:function(){a(n.modules.Skeleton.widgetSelector).each(function(){n.modules.Skeleton.initWidget(a(this))})},initWidget:function(e){return new n.modules.Skeleton({el:e})}}),n});